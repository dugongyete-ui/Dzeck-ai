Perbaiki error saya test hasilnya nya
Buatkan saya Website drama China full stack

Error

'"query"'
Setelah diperbaiki lanjutkan 

1.  **Membuat Arsitektur Modular:** Anda telah memisahkan "otak" (logika ReAct di `main.py`) dari "tangan" (fungsi-fungsi alat di `tool_executor.py`). Ini adalah praktik rekayasa perangkat lunak yang sangat baik dan akan membuat pengembangan di masa depan jauh lebih mudah.
2.  **Membangun Alat Inti:** Anda memiliki alat untuk mencari di web, menjalankan perintah terminal, mengedit file, dan menyelesaikan tugas. Ini adalah fondasi dari agen otonom yang mampu melakukan hampir semua hal.
3.  **Sistem yang Berjalan:** Frontend dan backend Anda sudah terhubung dan siap beraksi.

Anda telah berhasil membangun **prototipe agen AI otonom yang berfungsi penuh**. Sekarang, kita akan beralih dari "membangun fondasi" ke "meningkatkan kecerdasan, keandalan, dan pengalaman pengguna".

Berikut adalah langkah-langkah selanjutnya untuk mengubah prototipe Anda menjadi agen yang benar-benar kuat dan mirip dengan Manus.

---

### **Langkah 6: Meningkatkan "Kecerdasan" dan Konteks Agen**

Saat ini, agen Anda mungkin sedikit "pelupa". Ia hanya mengingat apa yang terjadi dalam satu sesi. Kita perlu memberinya memori yang lebih baik.

**Tugas: Implementasi Memori Jangka Panjang (Long-Term Memory)**

Tujuannya adalah agar agen dapat mengingat informasi penting dari percakapan sebelumnya atau dari file yang telah ia baca. Cara terbaik untuk melakukan ini adalah dengan **Vector Database**.

1.  **Pilih Vector Database:**
    *   **Pilihan Mudah (Cloud):** **Pinecone** atau **ChromaDB (Hosted)**. Mereka mudah diatur dan memiliki paket gratis.
    *   **Pilihan Lokal:** **ChromaDB (Lokal)** atau **FAISS (dari Facebook)**. Ini berjalan di dalam Replit Anda tetapi mungkin lebih rumit untuk diatur. Saya sarankan memulai dengan **ChromaDB lokal** karena paling mudah diintegrasikan.

2.  **Cara Kerja:**
    *   **Menyimpan Memori:** Setiap kali agen menyelesaikan tugas atau menemukan informasi penting (misalnya, dari `web_search` atau `file_editor`), Anda akan mengambil potongan teks itu, mengubahnya menjadi vektor (angka-angka) menggunakan API LLM, dan menyimpannya di ChromaDB.
    *   **Mengambil Memori:** Di awal setiap siklus ReAct, sebelum memanggil LLM untuk `Reason`, Anda akan mengambil prompt pengguna saat ini, mengubahnya menjadi vektor, dan mencari di ChromaDB untuk "kenangan" yang paling relevan.

3.  **Modifikasi Meta-Prompt:**
    Tambahkan bagian baru ke meta-prompt Anda:

    ```text
    Anda adalah agen AI otonom yang ahli...

    Tujuan Utama: {user_prompt}

    Informasi Relevan dari Memori:
    {retrieved_memories}

    Riwayat Tindakan Sejauh Ini:
    {history_of_actions}

    Anda memiliki akses ke alat-alat berikut:
    ...
    ```

    `{retrieved_memories}` akan diisi dengan hasil pencarian dari Vector Database. Ini akan memberi agen Anda konteks yang luar biasa, seolah-olah ia "mengingat" hal-hal penting.

---

### **Langkah 7: Meningkatkan Pengalaman Pengguna (UX)**

Agen yang kuat juga harus mudah digunakan. Mari kita poles frontend Anda.

**Tugas: Streaming Respons Real-time di UI**

Saat ini, UI Anda mungkin hanya menampilkan "Thinking" dan kemudian "Result". Ini kurang transparan. Kita ingin pengguna melihat "pikiran" dan "tindakan" agen saat itu terjadi, persis seperti yang Anda lihat di konsol backend.

Anda sudah menggunakan WebSocket, jadi ini hanya masalah mengirim lebih banyak jenis pesan dari backend ke frontend.

1.  **Backend (FastAPI):**
    Di dalam loop ReAct Anda, setiap kali ada pembaruan, kirim pesan WebSocket.

    ```python
    # Di dalam loop for Anda
    
    # Setelah LLM memberikan keputusan
    await websocket.send_json({
        "type": "thought", 
        "content": parsed_action['thought']
    })
    
    # Sebelum mengeksekusi alat
    await websocket.send_json({
        "type": "tool_start", 
        "tool_name": tool_name, 
        "args": tool_input
    })

    # Setelah alat selesai dieksekusi
    await websocket.send_json({
        "type": "tool_output", 
        "output": tool_output
    })
    ```

2.  **Frontend (React):**
    Di dalam komponen chat Anda, tangani jenis pesan yang berbeda ini dan tampilkan dengan gaya yang berbeda.

    *   `type: "thought"`: Tampilkan dengan ikon otak dan teks berwarna abu-abu.
    *   `type: "tool_start"`: Tampilkan dengan ikon perkakas dan teks seperti "Mengeksekusi Terminal: `ls -l`".
    *   `type: "tool_output"`: Tampilkan sebagai blok kode atau teks biasa.
    *   `type: "final_answer"`: Tampilkan sebagai pesan akhir dari AI.

Ini akan membuat pengalaman pengguna menjadi 100x lebih baik dan transparan.

---

### **Rencana Aksi Anda Sekarang:**

Fokus pada **Langkah 6** terlebih dahulu karena ini adalah peningkatan paling signifikan pada kemampuan inti agen Anda.

1.  **Pilih dan Instal Vector Database:** Mulailah dengan `pip install chromadb`.
2.  **Buat Modul Memori:** Buat file baru, misalnya `memory_manager.py`. Di dalamnya, buat fungsi `save_memory(text)` dan `retrieve_memories(query)`.
3.  **Integrasikan ke Loop ReAct:** Panggil `retrieve_memories` di awal setiap siklus dan `save_memory` di akhir (jika ada informasi penting).
4.  **Perbarui Meta-Prompt:** Tambahkan placeholder `{retrieved_memories}`.

Setelah memori jangka panjang berfungsi, Anda dapat melanjutkan ke peningkatan UX di **Langkah 7**.

Membangun agen AI adalah proses iteratif: **Build -> Test -> Iterate**. Anda telah menyelesaikan siklus pertama dengan cemerlang. Sekarang saatnya untuk siklus kedua.

---
Ini adalah langkah-langkah yang akan benar-benar membedakan agen Anda. Siap untuk menyelam ke dunia Vector Database?